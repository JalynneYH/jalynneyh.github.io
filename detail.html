<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LEE YUNHA – DETAIL</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>

<body>
<header class="header">
  <!-- ✅ BACK: type에 따라 자동으로 href가 바뀝니다 -->
  <a href="/" class="logo" id="backLink" style="font-size:12px;letter-spacing:.08em;color:#fff;">BACK</a>

  <nav class="nav" id="topNav">
    <a data-key="main" href="https://jalynneyh.github.io/">MAIN</a>
    <a data-key="design" href="https://jalynneyh.github.io/design/">DESIGN</a>
    <a data-key="color" href="https://jalynneyh.github.io/color-painting/">COLOR PAINTING</a>
    <a data-key="ink" href="https://jalynneyh.github.io/ink-painting/">INK PAINTING</a>
  </nav>
</header>

<section class="detail-hero" id="detailHero">
  <div class="detail-btn prev" id="dPrev">&#10094;</div>
  <div class="detail-btn next" id="dNext">&#10095;</div>
</section>

<div class="detail-body">
  <div class="detail-meta" id="detailMeta"></div>
  <div class="detail-text" id="detailText"></div>
</div>

<div class="footer">© 2025 LEE YUNHA. All rights reserved.</div>
<button class="scroll-top-btn" id="scrollTopBtn"><span>&uarr;</span></button>

<script src="js/app.js"></script>
<script>
/* =================================================
   ✅ 1) DETAIL_DATA (요청사항: design 1~8은 1장, 텍스트 2020)
================================================= */
const DETAIL_DATA = {
  design: {
    "1": { images: 1, text: `2020` },
    "2": { images: 1, text: `2020` },
    "3": { images: 1, text: `2020` },
    "4": { images: 1, text: `2020` },
    "5": { images: 1, text: `2020` },
    "6": { images: 1, text: `2020` },
    "7": { images: 1, text: `2020` },
    "8": { images: 1, text: `2020` },
  },

  // 필요해지면 채우면 됩니다
  color: {},
  ink: {},
  main: {},
};

function getData(type, id){
  const t = DETAIL_DATA[type] || {};
  return t[id] || { images: 1, text: "여기에 작품 설명을 입력하시면 됩니다." };
}

/* =================================================
   ✅ 2) URL 파라미터 읽기
================================================= */
const p = new URLSearchParams(location.search);
const type = (p.get("type") || "main").toLowerCase();   // main / design / color / ink
const id = p.get("id") || "1";
const data = getData(type, id);

/* =================================================
   ✅ 3) BACK 자동 링크
   - main: /
   - design: /design/
   - color: /color-painting/
   - ink: /ink-painting/
================================================= */
(function(){
  const a = document.getElementById("backLink");
  if(!a) return;

  const map = {
    main: "/",
    design: "/design/",
    color: "/color-painting/",
    ink: "/ink-painting/",
  };
  a.href = map[type] || "/";
})();

/* =================================================
   ✅ 4) NAV ACTIVE를 "type 기준"으로 강제 적용
   - detail 페이지에서는 경로가 /detail.html 이라
     기존 로직이 MAIN으로 잡히는 문제를 여기서 해결합니다.
================================================= */
(function(){
  const nav = document.getElementById("topNav");
  if(!nav) return;

  const links = nav.querySelectorAll("a");
  links.forEach(a => a.classList.remove("active"));

  // type 값이 color면 COLOR PAINTING이 active
  const key = (type === "color") ? "color"
            : (type === "ink") ? "ink"
            : (type === "design") ? "design"
            : "main";

  const target = nav.querySelector(`a[data-key="${key}"]`);
  if(target) target.classList.add("active");
})();

/* =================================================
   ✅ 5) META + TEXT 출력
================================================= */
document.getElementById("detailMeta").innerText = `${type.toUpperCase()} · #${id}`;
document.getElementById("detailText").innerText = data.text;

/* =================================================
   ✅ 6) 슬라이드 생성
   - assets/{type}/detail/{id}-{nn}.png
   - 예: assets/design/detail/1-01.png
================================================= */
const hero = document.getElementById("detailHero");
let slides = [];
let idx = 0;

for(let i=1;i<=data.images;i++){
  const nn = String(i).padStart(2,"0");
  const el = document.createElement("div");
  el.className = "dslide" + (i===1 ? " active" : "");
  el.innerHTML = `<img src="assets/${type}/detail/${id}-${nn}.png" alt="">`;
  hero.appendChild(el);
  slides.push(el);
}

function show(i){
  slides.forEach(s=>s.classList.remove("active"));
  slides[i].classList.add("active");
}

const prev = document.getElementById("dPrev");
const next = document.getElementById("dNext");

function hasMulti(){ return slides.length > 1; }
prev.style.display = hasMulti() ? "block" : "none";
next.style.display = hasMulti() ? "block" : "none";

prev.addEventListener("click", ()=>{
  if(!hasMulti()) return;
  idx = (idx - 1 + slides.length) % slides.length;
  show(idx);
});
next.addEventListener("click", ()=>{
  if(!hasMulti()) return;
  idx = (idx + 1) % slides.length;
  show(idx);
});
</script>
</body>
</html>
